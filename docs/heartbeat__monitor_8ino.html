<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TEST DOC: Heart-Rate-Monitor-CS410-SP2025/heartbeat_monitor/heartbeat_monitor.ino File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">TEST DOC
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('heartbeat__monitor_8ino.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">heartbeat_monitor.ino File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>A simple Arduino-based heart rate monitor using a pulse sensor and buzzer.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;HTTPClient.h&gt;</code><br />
<code>#include &lt;WiFi.h&gt;</code><br />
<code>#include &lt;ArduinoJson.h&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a44591d5cbc8c892ea69215002f6cb57c" id="r_a44591d5cbc8c892ea69215002f6cb57c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a44591d5cbc8c892ea69215002f6cb57c">INTERVAL_BUFFER</a>&#160;&#160;&#160;10</td></tr>
<tr class="memdesc:a44591d5cbc8c892ea69215002f6cb57c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of intervals stored to compute BPM.  <br /></td></tr>
<tr class="separator:a44591d5cbc8c892ea69215002f6cb57c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4fc01d736fe50cf5b977f755b675f11d" id="r_a4fc01d736fe50cf5b977f755b675f11d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4fc01d736fe50cf5b977f755b675f11d">setup</a> ()</td></tr>
<tr class="memdesc:a4fc01d736fe50cf5b977f755b675f11d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the serial monitor and buzzer pin.  <br /></td></tr>
<tr class="separator:a4fc01d736fe50cf5b977f755b675f11d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af999c3fa5a7a49eff6c0c5817f176bae" id="r_af999c3fa5a7a49eff6c0c5817f176bae"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af999c3fa5a7a49eff6c0c5817f176bae">calculateBaseline</a> ()</td></tr>
<tr class="memdesc:af999c3fa5a7a49eff6c0c5817f176bae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the average of recent signal values to estimate a baseline.  <br /></td></tr>
<tr class="separator:af999c3fa5a7a49eff6c0c5817f176bae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a677f90246afcea6be7c37a6cd9fe77ba" id="r_a677f90246afcea6be7c37a6cd9fe77ba"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a677f90246afcea6be7c37a6cd9fe77ba">calculateBPM</a> ()</td></tr>
<tr class="memdesc:a677f90246afcea6be7c37a6cd9fe77ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates BPM from stored beat intervals.  <br /></td></tr>
<tr class="separator:a677f90246afcea6be7c37a6cd9fe77ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0892ea3271c248e6a05d78e331f9b568" id="r_a0892ea3271c248e6a05d78e331f9b568"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0892ea3271c248e6a05d78e331f9b568">printLiveBPM</a> (unsigned long now)</td></tr>
<tr class="memdesc:a0892ea3271c248e6a05d78e331f9b568"><td class="mdescLeft">&#160;</td><td class="mdescRight">Periodically prints live BPM to the Serial Monitor.  <br /></td></tr>
<tr class="separator:a0892ea3271c248e6a05d78e331f9b568"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a489927577820bba330d2560dda1e2880" id="r_a489927577820bba330d2560dda1e2880"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a489927577820bba330d2560dda1e2880">handleBuzzer</a> (unsigned long now)</td></tr>
<tr class="memdesc:a489927577820bba330d2560dda1e2880"><td class="mdescLeft">&#160;</td><td class="mdescRight">Controls the buzzer's activation in sync with heartbeat detection.  <br /></td></tr>
<tr class="separator:a489927577820bba330d2560dda1e2880"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a678b97ea03d1fe7a5bc20c3d96280345" id="r_a678b97ea03d1fe7a5bc20c3d96280345"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a678b97ea03d1fe7a5bc20c3d96280345">handleFingerRemoval</a> ()</td></tr>
<tr class="memdesc:a678b97ea03d1fe7a5bc20c3d96280345"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles logic and messages when finger is removed from the sensor.  <br /></td></tr>
<tr class="separator:a678b97ea03d1fe7a5bc20c3d96280345"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31c1e54c46a3b60c439f2964cd6bfc9e" id="r_a31c1e54c46a3b60c439f2964cd6bfc9e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a31c1e54c46a3b60c439f2964cd6bfc9e">detectPulse</a> (int sensorValue, unsigned long now)</td></tr>
<tr class="memdesc:a31c1e54c46a3b60c439f2964cd6bfc9e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detects a pulse from sensor readings and stores interval timing.  <br /></td></tr>
<tr class="separator:a31c1e54c46a3b60c439f2964cd6bfc9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ab2382f04f111a87568186707b5d5ea" id="r_a7ab2382f04f111a87568186707b5d5ea"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7ab2382f04f111a87568186707b5d5ea">httpRequest</a> (char *requestBody)</td></tr>
<tr class="memdesc:a7ab2382f04f111a87568186707b5d5ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a http post request containing a json object of the heartbeat data.  <br /></td></tr>
<tr class="separator:a7ab2382f04f111a87568186707b5d5ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe461d27b9c48d5921c00d521181f12f" id="r_afe461d27b9c48d5921c00d521181f12f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afe461d27b9c48d5921c00d521181f12f">loop</a> ()</td></tr>
<tr class="memdesc:afe461d27b9c48d5921c00d521181f12f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main execution loop: reads sensor, updates baseline, detects pulse, and controls buzzer.  <br /></td></tr>
<tr class="separator:afe461d27b9c48d5921c00d521181f12f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a1073356e0e1a07d0cf84ec154a2060ec" id="r_a1073356e0e1a07d0cf84ec154a2060ec"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1073356e0e1a07d0cf84ec154a2060ec">sensorPin</a> = 34</td></tr>
<tr class="memdesc:a1073356e0e1a07d0cf84ec154a2060ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Analog pin connected to the pulse sensor.  <br /></td></tr>
<tr class="separator:a1073356e0e1a07d0cf84ec154a2060ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a988a608b186de34e793324aee3ec73ee" id="r_a988a608b186de34e793324aee3ec73ee"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a988a608b186de34e793324aee3ec73ee">buzzerPin</a> = 23</td></tr>
<tr class="memdesc:a988a608b186de34e793324aee3ec73ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Digital pin connected to the buzzer (active low).  <br /></td></tr>
<tr class="separator:a988a608b186de34e793324aee3ec73ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cb7aa26412b9517e92b492fa0386879" id="r_a4cb7aa26412b9517e92b492fa0386879"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4cb7aa26412b9517e92b492fa0386879">bufferSize</a> = 50</td></tr>
<tr class="memdesc:a4cb7aa26412b9517e92b492fa0386879"><td class="mdescLeft">&#160;</td><td class="mdescRight">Size of the rolling signal buffer.  <br /></td></tr>
<tr class="separator:a4cb7aa26412b9517e92b492fa0386879"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac390c6af3e9e407c6661abc529517087" id="r_ac390c6af3e9e407c6661abc529517087"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac390c6af3e9e407c6661abc529517087">signalBuffer</a> [<a class="el" href="#a4cb7aa26412b9517e92b492fa0386879">bufferSize</a>]</td></tr>
<tr class="memdesc:ac390c6af3e9e407c6661abc529517087"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores recent analog readings for baseline calculation.  <br /></td></tr>
<tr class="separator:ac390c6af3e9e407c6661abc529517087"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73b963945a418c57630c1b66ce2aa74f" id="r_a73b963945a418c57630c1b66ce2aa74f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a73b963945a418c57630c1b66ce2aa74f">bufferIndex</a> = 0</td></tr>
<tr class="memdesc:a73b963945a418c57630c1b66ce2aa74f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Current index in the signal buffer.  <br /></td></tr>
<tr class="separator:a73b963945a418c57630c1b66ce2aa74f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac49ccefb4c1a75c25992328edc954f98" id="r_ac49ccefb4c1a75c25992328edc954f98"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac49ccefb4c1a75c25992328edc954f98">baseline</a> = 0</td></tr>
<tr class="memdesc:ac49ccefb4c1a75c25992328edc954f98"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dynamic signal baseline used for pulse detection.  <br /></td></tr>
<tr class="separator:ac49ccefb4c1a75c25992328edc954f98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68e4405a1f7913b7d9dbb7696d877be6" id="r_a68e4405a1f7913b7d9dbb7696d877be6"><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a68e4405a1f7913b7d9dbb7696d877be6">beatIntervals</a> [<a class="el" href="#a44591d5cbc8c892ea69215002f6cb57c">INTERVAL_BUFFER</a>]</td></tr>
<tr class="memdesc:a68e4405a1f7913b7d9dbb7696d877be6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores time intervals between detected beats.  <br /></td></tr>
<tr class="separator:a68e4405a1f7913b7d9dbb7696d877be6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e9efb4dd8d61c3372c394021884e76d" id="r_a2e9efb4dd8d61c3372c394021884e76d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2e9efb4dd8d61c3372c394021884e76d">intervalIndex</a> = 0</td></tr>
<tr class="memdesc:a2e9efb4dd8d61c3372c394021884e76d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Current index in the interval buffer.  <br /></td></tr>
<tr class="separator:a2e9efb4dd8d61c3372c394021884e76d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac20dce290979a7e365d9b73e14976a22" id="r_ac20dce290979a7e365d9b73e14976a22"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac20dce290979a7e365d9b73e14976a22">intervalBufferFilled</a> = false</td></tr>
<tr class="memdesc:ac20dce290979a7e365d9b73e14976a22"><td class="mdescLeft">&#160;</td><td class="mdescRight">True if the interval buffer has been filled at least once.  <br /></td></tr>
<tr class="separator:ac20dce290979a7e365d9b73e14976a22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1276ad0834801ffb9390a478d627b3e8" id="r_a1276ad0834801ffb9390a478d627b3e8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1276ad0834801ffb9390a478d627b3e8">pulseDetected</a> = false</td></tr>
<tr class="memdesc:a1276ad0834801ffb9390a478d627b3e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tracks whether a pulse is currently being detected.  <br /></td></tr>
<tr class="separator:a1276ad0834801ffb9390a478d627b3e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ac345d9f834477063c2be1d2a1a2191" id="r_a9ac345d9f834477063c2be1d2a1a2191"><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9ac345d9f834477063c2be1d2a1a2191">lastBeatTime</a> = 0</td></tr>
<tr class="memdesc:a9ac345d9f834477063c2be1d2a1a2191"><td class="mdescLeft">&#160;</td><td class="mdescRight">Timestamp of the last detected beat.  <br /></td></tr>
<tr class="separator:a9ac345d9f834477063c2be1d2a1a2191"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfb5fc7bc19645bf5e6a035e710d908b" id="r_abfb5fc7bc19645bf5e6a035e710d908b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abfb5fc7bc19645bf5e6a035e710d908b">buzzerOn</a> = false</td></tr>
<tr class="memdesc:abfb5fc7bc19645bf5e6a035e710d908b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tracks buzzer state (on or off).  <br /></td></tr>
<tr class="separator:abfb5fc7bc19645bf5e6a035e710d908b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a185193089d46abf0dc7e29ec6d92180f" id="r_a185193089d46abf0dc7e29ec6d92180f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a185193089d46abf0dc7e29ec6d92180f">shouldBeep</a> = false</td></tr>
<tr class="memdesc:a185193089d46abf0dc7e29ec6d92180f"><td class="mdescLeft">&#160;</td><td class="mdescRight">True if the buzzer should beep on the next loop.  <br /></td></tr>
<tr class="separator:a185193089d46abf0dc7e29ec6d92180f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac65f8f362e21f6387ccff8d52126053e" id="r_ac65f8f362e21f6387ccff8d52126053e"><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac65f8f362e21f6387ccff8d52126053e">buzzerStartTime</a> = 0</td></tr>
<tr class="memdesc:ac65f8f362e21f6387ccff8d52126053e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Timestamp when the buzzer was last activated.  <br /></td></tr>
<tr class="separator:ac65f8f362e21f6387ccff8d52126053e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad884840c4e19bc78ebefd95cad218fbb" id="r_ad884840c4e19bc78ebefd95cad218fbb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad884840c4e19bc78ebefd95cad218fbb">bpm</a> = 0</td></tr>
<tr class="memdesc:ad884840c4e19bc78ebefd95cad218fbb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Current calculated BPM.  <br /></td></tr>
<tr class="separator:ad884840c4e19bc78ebefd95cad218fbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29e4212483d7b75842fe375e3e1729ab" id="r_a29e4212483d7b75842fe375e3e1729ab"><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a29e4212483d7b75842fe375e3e1729ab">lastBPMPrint</a> = 0</td></tr>
<tr class="memdesc:a29e4212483d7b75842fe375e3e1729ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Last time the BPM was printed to the Serial Monitor.  <br /></td></tr>
<tr class="separator:a29e4212483d7b75842fe375e3e1729ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04da981b017c346d17077cd75ddad18a" id="r_a04da981b017c346d17077cd75ddad18a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a04da981b017c346d17077cd75ddad18a">fingerOnSensor</a> = false</td></tr>
<tr class="memdesc:a04da981b017c346d17077cd75ddad18a"><td class="mdescLeft">&#160;</td><td class="mdescRight">True if finger is currently on the sensor.  <br /></td></tr>
<tr class="separator:a04da981b017c346d17077cd75ddad18a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b7c1bc9deba432fd0ec0b86ae8e3895" id="r_a1b7c1bc9deba432fd0ec0b86ae8e3895"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1b7c1bc9deba432fd0ec0b86ae8e3895">wasFingerOn</a> = false</td></tr>
<tr class="memdesc:a1b7c1bc9deba432fd0ec0b86ae8e3895"><td class="mdescLeft">&#160;</td><td class="mdescRight">True if the finger was on the sensor in the last loop.  <br /></td></tr>
<tr class="separator:a1b7c1bc9deba432fd0ec0b86ae8e3895"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad97c079afac7259be06870b2c4ab0602" id="r_ad97c079afac7259be06870b2c4ab0602"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad97c079afac7259be06870b2c4ab0602">serverURL</a> = &quot;https://heart-rate-monitor-cs-410-sp-2025-kbr3jv266.vercel.app/api/heart-rate&quot;</td></tr>
<tr class="memdesc:ad97c079afac7259be06870b2c4ab0602"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destination for database.  <br /></td></tr>
<tr class="separator:ad97c079afac7259be06870b2c4ab0602"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A simple Arduino-based heart rate monitor using a pulse sensor and buzzer. </p>
<p>This sketch reads analog input from a heartbeat sensor to detect pulses, calculates the current BPM (beats per minute), and gives audible feedback via a buzzer on each detected beat.</p>
<dl class="section author"><dt>Author</dt><dd>Lorenzo Orio </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.0 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2025-05-13 </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a44591d5cbc8c892ea69215002f6cb57c" name="a44591d5cbc8c892ea69215002f6cb57c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44591d5cbc8c892ea69215002f6cb57c">&#9670;&#160;</a></span>INTERVAL_BUFFER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INTERVAL_BUFFER&#160;&#160;&#160;10</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Number of intervals stored to compute BPM. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="af999c3fa5a7a49eff6c0c5817f176bae" name="af999c3fa5a7a49eff6c0c5817f176bae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af999c3fa5a7a49eff6c0c5817f176bae">&#9670;&#160;</a></span>calculateBaseline()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int calculateBaseline </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculates the average of recent signal values to estimate a baseline. </p>
<dl class="section return"><dt>Returns</dt><dd>int The calculated baseline. </dd></dl>

</div>
</div>
<a id="a677f90246afcea6be7c37a6cd9fe77ba" name="a677f90246afcea6be7c37a6cd9fe77ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a677f90246afcea6be7c37a6cd9fe77ba">&#9670;&#160;</a></span>calculateBPM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int calculateBPM </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculates BPM from stored beat intervals. </p>
<dl class="section return"><dt>Returns</dt><dd>int Estimated Beats Per Minute (BPM). </dd></dl>

</div>
</div>
<a id="a31c1e54c46a3b60c439f2964cd6bfc9e" name="a31c1e54c46a3b60c439f2964cd6bfc9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31c1e54c46a3b60c439f2964cd6bfc9e">&#9670;&#160;</a></span>detectPulse()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void detectPulse </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>sensorValue</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long</td>          <td class="paramname"><span class="paramname"><em>now</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Detects a pulse from sensor readings and stores interval timing. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sensorValue</td><td>The current sensor analog reading. </td></tr>
    <tr><td class="paramname">now</td><td>The current time in milliseconds. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a489927577820bba330d2560dda1e2880" name="a489927577820bba330d2560dda1e2880"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a489927577820bba330d2560dda1e2880">&#9670;&#160;</a></span>handleBuzzer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void handleBuzzer </td>
          <td>(</td>
          <td class="paramtype">unsigned long</td>          <td class="paramname"><span class="paramname"><em>now</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Controls the buzzer's activation in sync with heartbeat detection. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">now</td><td>The current time in milliseconds. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a678b97ea03d1fe7a5bc20c3d96280345" name="a678b97ea03d1fe7a5bc20c3d96280345"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a678b97ea03d1fe7a5bc20c3d96280345">&#9670;&#160;</a></span>handleFingerRemoval()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void handleFingerRemoval </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handles logic and messages when finger is removed from the sensor. </p>

</div>
</div>
<a id="a7ab2382f04f111a87568186707b5d5ea" name="a7ab2382f04f111a87568186707b5d5ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ab2382f04f111a87568186707b5d5ea">&#9670;&#160;</a></span>httpRequest()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void httpRequest </td>
          <td>(</td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>requestBody</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends a http post request containing a json object of the heartbeat data. </p>

</div>
</div>
<a id="afe461d27b9c48d5921c00d521181f12f" name="afe461d27b9c48d5921c00d521181f12f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe461d27b9c48d5921c00d521181f12f">&#9670;&#160;</a></span>loop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void loop </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main execution loop: reads sensor, updates baseline, detects pulse, and controls buzzer. </p>

</div>
</div>
<a id="a0892ea3271c248e6a05d78e331f9b568" name="a0892ea3271c248e6a05d78e331f9b568"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0892ea3271c248e6a05d78e331f9b568">&#9670;&#160;</a></span>printLiveBPM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void printLiveBPM </td>
          <td>(</td>
          <td class="paramtype">unsigned long</td>          <td class="paramname"><span class="paramname"><em>now</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Periodically prints live BPM to the Serial Monitor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">now</td><td>The current time in milliseconds. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4fc01d736fe50cf5b977f755b675f11d" name="a4fc01d736fe50cf5b977f755b675f11d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fc01d736fe50cf5b977f755b675f11d">&#9670;&#160;</a></span>setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setup </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the serial monitor and buzzer pin. </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ac49ccefb4c1a75c25992328edc954f98" name="ac49ccefb4c1a75c25992328edc954f98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac49ccefb4c1a75c25992328edc954f98">&#9670;&#160;</a></span>baseline</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int baseline = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Dynamic signal baseline used for pulse detection. </p>

</div>
</div>
<a id="a68e4405a1f7913b7d9dbb7696d877be6" name="a68e4405a1f7913b7d9dbb7696d877be6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68e4405a1f7913b7d9dbb7696d877be6">&#9670;&#160;</a></span>beatIntervals</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long beatIntervals[<a class="el" href="#a44591d5cbc8c892ea69215002f6cb57c">INTERVAL_BUFFER</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stores time intervals between detected beats. </p>

</div>
</div>
<a id="ad884840c4e19bc78ebefd95cad218fbb" name="ad884840c4e19bc78ebefd95cad218fbb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad884840c4e19bc78ebefd95cad218fbb">&#9670;&#160;</a></span>bpm</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int bpm = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Current calculated BPM. </p>

</div>
</div>
<a id="a73b963945a418c57630c1b66ce2aa74f" name="a73b963945a418c57630c1b66ce2aa74f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73b963945a418c57630c1b66ce2aa74f">&#9670;&#160;</a></span>bufferIndex</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int bufferIndex = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Current index in the signal buffer. </p>

</div>
</div>
<a id="a4cb7aa26412b9517e92b492fa0386879" name="a4cb7aa26412b9517e92b492fa0386879"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cb7aa26412b9517e92b492fa0386879">&#9670;&#160;</a></span>bufferSize</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int bufferSize = 50</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Size of the rolling signal buffer. </p>

</div>
</div>
<a id="abfb5fc7bc19645bf5e6a035e710d908b" name="abfb5fc7bc19645bf5e6a035e710d908b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abfb5fc7bc19645bf5e6a035e710d908b">&#9670;&#160;</a></span>buzzerOn</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool buzzerOn = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tracks buzzer state (on or off). </p>

</div>
</div>
<a id="a988a608b186de34e793324aee3ec73ee" name="a988a608b186de34e793324aee3ec73ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a988a608b186de34e793324aee3ec73ee">&#9670;&#160;</a></span>buzzerPin</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int buzzerPin = 23</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Digital pin connected to the buzzer (active low). </p>

</div>
</div>
<a id="ac65f8f362e21f6387ccff8d52126053e" name="ac65f8f362e21f6387ccff8d52126053e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac65f8f362e21f6387ccff8d52126053e">&#9670;&#160;</a></span>buzzerStartTime</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long buzzerStartTime = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Timestamp when the buzzer was last activated. </p>

</div>
</div>
<a id="a04da981b017c346d17077cd75ddad18a" name="a04da981b017c346d17077cd75ddad18a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04da981b017c346d17077cd75ddad18a">&#9670;&#160;</a></span>fingerOnSensor</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool fingerOnSensor = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>True if finger is currently on the sensor. </p>

</div>
</div>
<a id="ac20dce290979a7e365d9b73e14976a22" name="ac20dce290979a7e365d9b73e14976a22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac20dce290979a7e365d9b73e14976a22">&#9670;&#160;</a></span>intervalBufferFilled</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool intervalBufferFilled = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>True if the interval buffer has been filled at least once. </p>

</div>
</div>
<a id="a2e9efb4dd8d61c3372c394021884e76d" name="a2e9efb4dd8d61c3372c394021884e76d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e9efb4dd8d61c3372c394021884e76d">&#9670;&#160;</a></span>intervalIndex</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int intervalIndex = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Current index in the interval buffer. </p>

</div>
</div>
<a id="a9ac345d9f834477063c2be1d2a1a2191" name="a9ac345d9f834477063c2be1d2a1a2191"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ac345d9f834477063c2be1d2a1a2191">&#9670;&#160;</a></span>lastBeatTime</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long lastBeatTime = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Timestamp of the last detected beat. </p>

</div>
</div>
<a id="a29e4212483d7b75842fe375e3e1729ab" name="a29e4212483d7b75842fe375e3e1729ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29e4212483d7b75842fe375e3e1729ab">&#9670;&#160;</a></span>lastBPMPrint</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long lastBPMPrint = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Last time the BPM was printed to the Serial Monitor. </p>

</div>
</div>
<a id="a1276ad0834801ffb9390a478d627b3e8" name="a1276ad0834801ffb9390a478d627b3e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1276ad0834801ffb9390a478d627b3e8">&#9670;&#160;</a></span>pulseDetected</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool pulseDetected = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tracks whether a pulse is currently being detected. </p>

</div>
</div>
<a id="a1073356e0e1a07d0cf84ec154a2060ec" name="a1073356e0e1a07d0cf84ec154a2060ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1073356e0e1a07d0cf84ec154a2060ec">&#9670;&#160;</a></span>sensorPin</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int sensorPin = 34</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Analog pin connected to the pulse sensor. </p>

</div>
</div>
<a id="ad97c079afac7259be06870b2c4ab0602" name="ad97c079afac7259be06870b2c4ab0602"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad97c079afac7259be06870b2c4ab0602">&#9670;&#160;</a></span>serverURL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* serverURL = &quot;https://heart-rate-monitor-cs-410-sp-2025-kbr3jv266.vercel.app/api/heart-rate&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destination for database. </p>

</div>
</div>
<a id="a185193089d46abf0dc7e29ec6d92180f" name="a185193089d46abf0dc7e29ec6d92180f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a185193089d46abf0dc7e29ec6d92180f">&#9670;&#160;</a></span>shouldBeep</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool shouldBeep = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>True if the buzzer should beep on the next loop. </p>

</div>
</div>
<a id="ac390c6af3e9e407c6661abc529517087" name="ac390c6af3e9e407c6661abc529517087"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac390c6af3e9e407c6661abc529517087">&#9670;&#160;</a></span>signalBuffer</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int signalBuffer[<a class="el" href="#a4cb7aa26412b9517e92b492fa0386879">bufferSize</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stores recent analog readings for baseline calculation. </p>

</div>
</div>
<a id="a1b7c1bc9deba432fd0ec0b86ae8e3895" name="a1b7c1bc9deba432fd0ec0b86ae8e3895"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b7c1bc9deba432fd0ec0b86ae8e3895">&#9670;&#160;</a></span>wasFingerOn</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool wasFingerOn = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>True if the finger was on the sensor in the last loop. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_73a2899db198101e32e9388afb5b2751.html">Heart-Rate-Monitor-CS410-SP2025</a></li><li class="navelem"><a class="el" href="dir_c90cd830e6d104151db0ae5d29f8ae1b.html">heartbeat_monitor</a></li><li class="navelem"><a class="el" href="heartbeat__monitor_8ino.html">heartbeat_monitor.ino</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
